## Lab3 完善与拓展

## 1 目标

1. 完成语法分析中的错误处理
2. 在lab3所给的拓展任务中，自行挑选数个任务完成，总计需要得到12颗⭐

## 2 内容

#### 2.1 完成错误处理

将语法分析器进行完善，对于在err.h中

#### 2.2 扩展你的Pl/0

从以下任务中任意挑选完成，总共需计满12颗星，需说明你们的任务选择与设计思路（需检查及写入实验报告）

* 增加数组 ⭐⭐⭐⭐⭐⭐
  1. 为PL/0语言加入数组变量声明/对数组元素赋值/在表达式中引用数组元素等。
  2. 数组实现到二维即可，如：var i, j, k[10];
  *  词法分析需要加入对应符号，重新设计并实现语法分析，检查时需检查语法图与运行结果

* 增加逻辑运算符 && || !  ⭐⭐⭐⭐

  1. 增加逻辑运算符 && 、|| 和 ！

  2. 将PL/0语言中的“条件”概念一般化 (表达式值非零即为“真”)

  3. 加入短路计算
  *  词法分析需要加入对应符号，重新设计并实现语法分析，加入短路计算，检查时需检查语法图与运行结果

* 增加返回值   ⭐⭐⭐⭐

  1. 加入return语句

  2. 实现返回值
  *  词法分析需要加入对应关键字，重新设计并实现语法分析，检查时需检查语法图与运行结果

* 增加else/elif   ⭐⭐

  1. 为现有的if语句引入else与elif关键字
  *  词法分析需要加入对应关键字，重新设计并实现语法分析，检查时需检查语法图与运行结果

* 增加do while  ⭐⭐

  1. 为现有的循环语句引入do...while语法
  *  词法分析需要加入对应关键字，重新设计并实现语法分析，检查时需检查语法图与运行结果

* 增加参数传递   ⭐⭐
  1. 实现传值调用，如传递常量值，或普通变量/数组元素的值
  2. 进行简单的语义检查（如实参和形参个数/类型的对应等）
  *  重新设计并实现语法分析，检查时需检查语法图与运行结果
  *  在实现了数组的前提下，实现考虑数组的参数传递可额外获得2颗⭐

* 在语法分析中引入负数  ⭐⭐
  1. 在目前的语法分析中是无法识别负数的，这项任务作为拓展交由同学们完成
  *  设计并实现含有负数的语法分析，检查时需检查语法图与运行结果

## 3 检查

对于错误处理部分，与lab2相同，错误示例已给出在[**pl0_error.h**](http://210.45.114.146:880/staff/pl0compiler/blob/master/error/pl0_error.h)中（仅作为错误示例参考，可以自己定义并扩充为更完善的错误集），检查时需要能正确分析[**test_err.pl**](http://210.45.114.146:880/staff/pl0compiler/blob/master/examples/test_err.pl)，且分析过程中不因语法错误而导致后续分析无法进行。

对于自定义的拓展，检查方式类似，需说明你们的任务选择与设计思路，画出语法图，编译运行并能正确分析对应语法。