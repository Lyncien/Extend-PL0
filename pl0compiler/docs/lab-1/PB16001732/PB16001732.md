# Lab 1 Lexical Analysis

PB16001732 魏天心

## 实验负责情况

负责state的定义

```
	START,
	SLASH_SEL,
	LES_SEL,
	GTR_SEL,
	IN_NUM,
	IN_ID,
	IN_LINECOMMENTS,
	IN_BLOCKCOMMENTS,
	TO_END_BLOCKCOMMENTS,
	COLON_SEL,
	EXCLAMA_SEL,
	PLUS_AC,
	MINUS_AC,
	TIMES_AC,
	SLASH_AC,
	EQU_AC,
	NEQ_AC,
	LES_AC,
	LEQ_AC,
	GTR_AC,
	GEQ_AC,
	LPAREN_AC,
	RPAREN_AC,
	COMMA_AC,
	SEMICOLON_AC,
	PERIOD_AC,
	BECOMES_AC,
	NUM_AC,
	ID_AC,
	ILLEGAL_CHAR
```

及statetable的定义，即根据读入字符类型和当前状态确定状态转换，之后可根据状态确定Token类型

```
State statetable[N_CHARTYPE-1][N_STATE_NO_AC]={\
	{IN_ID,SLASH_AC,LES_AC,GTR_AC,NUM_AC,IN_ID,IN_LINECOMMENTS,IN_BLOCKCOMMENTS,IN_BLOCKCOMMENTS,ILLEGAL_CHAR,ILLEGAL_CHAR},\
	{IN_NUM,SLASH_AC,LES_AC,GTR_AC,IN_NUM,IN_ID,IN_LINECOMMENTS,IN_BLOCKCOMMENTS,IN_BLOCKCOMMENTS,ILLEGAL_CHAR,ILLEGAL_CHAR},\
	{START,SLASH_AC,LES_AC,GTR_AC,NUM_AC,ID_AC,IN_LINECOMMENTS,IN_BLOCKCOMMENTS,IN_BLOCKCOMMENTS,ILLEGAL_CHAR,ILLEGAL_CHAR},\
	{START,SLASH_AC,LES_AC,GTR_AC,NUM_AC,ID_AC,IN_LINECOMMENTS,IN_BLOCKCOMMENTS,IN_BLOCKCOMMENTS,ILLEGAL_CHAR,ILLEGAL_CHAR},\
	{START,SLASH_AC,LES_AC,GTR_AC,NUM_AC,ID_AC,START,IN_BLOCKCOMMENTS,IN_BLOCKCOMMENTS,ILLEGAL_CHAR,ILLEGAL_CHAR},\
	{PLUS_AC,SLASH_AC,LES_AC,GTR_AC,NUM_AC,ID_AC,IN_LINECOMMENTS,IN_BLOCKCOMMENTS,IN_BLOCKCOMMENTS,ILLEGAL_CHAR,ILLEGAL_CHAR},\
	{MINUS_AC,SLASH_AC,LES_AC,GTR_AC,NUM_AC,ID_AC,IN_LINECOMMENTS,IN_BLOCKCOMMENTS,IN_BLOCKCOMMENTS,ILLEGAL_CHAR,ILLEGAL_CHAR},\
	{TIMES_AC,IN_BLOCKCOMMENTS,LES_AC,GTR_AC,NUM_AC,ID_AC,IN_LINECOMMENTS,TO_END_BLOCKCOMMENTS,IN_BLOCKCOMMENTS,ILLEGAL_CHAR,ILLEGAL_CHAR},\
	{SLASH_SEL,IN_LINECOMMENTS,LES_AC,GTR_AC,NUM_AC,ID_AC,IN_LINECOMMENTS,IN_BLOCKCOMMENTS,START,ILLEGAL_CHAR,ILLEGAL_CHAR},\
	{EQU_AC,SLASH_AC,LEQ_AC,GEQ_AC,NUM_AC,ID_AC,IN_LINECOMMENTS,IN_BLOCKCOMMENTS,IN_BLOCKCOMMENTS,BECOMES_AC,NEQ_AC},\
	{LES_SEL,SLASH_AC,LES_AC,GTR_AC,NUM_AC,ID_AC,IN_LINECOMMENTS,IN_BLOCKCOMMENTS,IN_BLOCKCOMMENTS,ILLEGAL_CHAR,ILLEGAL_CHAR},\
	{GTR_SEL,SLASH_AC,LES_AC,GTR_AC,NUM_AC,ID_AC,IN_LINECOMMENTS,IN_BLOCKCOMMENTS,IN_BLOCKCOMMENTS,ILLEGAL_CHAR,ILLEGAL_CHAR},\
	{LPAREN_AC,SLASH_AC,LES_AC,GTR_AC,NUM_AC,ID_AC,IN_LINECOMMENTS,IN_BLOCKCOMMENTS,IN_BLOCKCOMMENTS,ILLEGAL_CHAR,ILLEGAL_CHAR},\
	{RPAREN_AC,SLASH_AC,LES_AC,GTR_AC,NUM_AC,ID_AC,IN_LINECOMMENTS,IN_BLOCKCOMMENTS,IN_BLOCKCOMMENTS,ILLEGAL_CHAR,ILLEGAL_CHAR},\
	{COMMA_AC,SLASH_AC,LES_AC,GTR_AC,NUM_AC,ID_AC,IN_LINECOMMENTS,IN_BLOCKCOMMENTS,IN_BLOCKCOMMENTS,ILLEGAL_CHAR,ILLEGAL_CHAR},\
	{SEMICOLON_AC,SLASH_AC,LES_AC,GTR_AC,NUM_AC,ID_AC,IN_LINECOMMENTS,IN_BLOCKCOMMENTS,IN_BLOCKCOMMENTS,ILLEGAL_CHAR,ILLEGAL_CHAR},\
	{PERIOD_AC,SLASH_AC,LES_AC,GTR_AC,NUM_AC,ID_AC,IN_LINECOMMENTS,IN_BLOCKCOMMENTS,IN_BLOCKCOMMENTS,ILLEGAL_CHAR,ILLEGAL_CHAR},\
	{COLON_SEL,SLASH_AC,LES_AC,GTR_AC,NUM_AC,ID_AC,IN_LINECOMMENTS,IN_BLOCKCOMMENTS,IN_BLOCKCOMMENTS,ILLEGAL_CHAR,ILLEGAL_CHAR},\
	{EXCLAMA_SEL,SLASH_AC,LES_AC,GTR_AC,NUM_AC,ID_AC,IN_LINECOMMENTS,IN_BLOCKCOMMENTS,IN_BLOCKCOMMENTS,ILLEGAL_CHAR,ILLEGAL_CHAR}\
};
```

## 问题和解决

表的定义及其转换较为复杂，所以可以总结规律，用自动化的脚本程序赋值，并手工矫正